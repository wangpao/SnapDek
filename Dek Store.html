<!DOCTYPE html>
<html lang="en"> <!-- 默认英文 -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dek Store - Learn in a Snap</title>
    <style>
        :root {
            --bg-color: #f8f9fa;
            --text-color: #333;
            --primary-color: #007bff;
            --secondary-text-color: #6c757d;
            --border-color: #ced4da;
            --input-bg-color: #fff;
            --button-bg-color: #f8f9fa;
            --button-hover-bg-color: #e9ecef;
            --theme-switcher-bg: #e9ecef;
            --theme-switcher-button-active-bg: #fff;
            --theme-switcher-icon-color: #555;
            --theme-switcher-icon-active-color: #007bff;
            --popular-item-bg: #FF7F7F;
            --search-tab-bg: #fff;
            --search-tab-border: #dee2e6;
            --search-tab-text: #495057;

            --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        }

        html.dark-mode {
            --bg-color: #212529;
            --text-color: #f8f9fa;
            --primary-color: #0d6efd;
            --secondary-text-color: #adb5bd;
            --border-color: #495057;
            --input-bg-color: #343a40;
            --button-bg-color: #343a40;
            --button-hover-bg-color: #495057;
            --theme-switcher-bg: #343a40;
            --theme-switcher-button-active-bg: #495057;
            --theme-switcher-icon-color: #adb5bd;
            --theme-switcher-icon-active-color: #f8f9fa;
            --popular-item-bg: #B22222;
            --search-tab-bg: #343a40;
            --search-tab-border: #495057;
            --search-tab-text: #f8f9fa;
        }

        body {
            font-family: var(--font-family-sans-serif);
            margin: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            transition: background-color 0.3s, color 0.3s;
            font-size: 1rem;
            line-height: 1.5;
        }

        .container {
            width: 100%;
            max-width: 1140px;
            margin: 0 auto;
            padding: 15px;
            box-sizing: border-box;
        }

        .top-bar {
            display: flex;
            justify-content: space-between; /* 默认两端对齐 */
            align-items: center;
            padding: 8px 0;
            margin-bottom: 20px;
            flex-wrap: wrap; /* 允许子元素换行 */
            gap: 10px; /* 在换行时，元素之间增加一些间隙 */
        }

        .language-switcher {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 5px 8px;
            border-radius: 4px;
            background: none;
            border: none;
            color: var(--secondary-text-color);
            /* order: 1; /* 如果需要明确顺序 */
        }
        .language-switcher:hover {
            background-color: var(--button-hover-bg-color);
        }
        .language-switcher .lang-icon {
            width: 18px;
            height: 18px;
            margin-right: 5px;
            fill: var(--secondary-text-color);
        }
        .language-switcher .current-lang-text {
            font-size: 0.875rem;
            margin-right: 3px;
        }
        .language-switcher .dropdown-arrow {
            width: 10px;
            height: 10px;
            fill: var(--secondary-text-color);
        }

        .theme-switcher {
            display: flex;
            align-items: center;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 2px;
            background-color: var(--theme-switcher-bg);
            /* order: 2; /* 如果需要明确顺序 */
        }
        .theme-switcher button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px 7px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .theme-switcher button.active {
            background-color: var(--theme-switcher-button-active-bg);
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        .theme-switcher button svg {
            width: 16px;
            height: 16px;
            fill: var(--theme-switcher-icon-color);
        }
        .theme-switcher button.active svg {
            fill: var(--theme-switcher-icon-active-color);
        }

        .hero-section {
            text-align: center;
            margin-bottom: 30px;
        }
        .logo-title-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }
        .logo-title-container svg.app-logo {
            width: 50px;
            height: 50px;
        }
        .hero-section h1 {
            font-size: 2.5rem;
            font-weight: 400;
            color: var(--text-color);
            margin: 0;
            line-height: 1.2;
        }
        .hero-section .subtitle {
            font-size: 1rem;
            color: var(--secondary-text-color);
            margin-top: 0;
            font-style: italic;
        }

        .search-section {
            margin-bottom: 30px;
        }
        .search-tabs .tab {
            display: inline-block;
            padding: 7px 12px;
            background-color: var(--search-tab-bg);
            border: 1px solid var(--search-tab-border);
            border-bottom: none;
            border-top-left-radius: 4px;
            border-top-right-radius: 4px;
            font-size: 0.9375rem;
            color: var(--search-tab-text);
            position: relative;
            top: 1px;
            margin-left: 15px;
        }
        .search-form {
            display: flex;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            overflow: hidden;
        }
        .search-form input[type="text"] {
            flex-grow: 1;
            padding: 10px 12px;
            border: none;
            font-size: 1rem;
            outline: none;
            background-color: var(--input-bg-color);
            color: var(--text-color);
        }
        .search-form input[type="text"]::placeholder {
            color: var(--secondary-text-color);
            opacity: 0.7;
        }
        .search-form button {
            padding: 10px 20px;
            background-color: var(--button-bg-color);
            border: none;
            border-left: 1px solid var(--border-color);
            color: var(--text-color);
            font-size: 1rem;
            cursor: pointer;
        }
        .search-form button:hover {
            background-color: var(--button-hover-bg-color);
        }
        .search-options a {
            font-size: 0.875rem;
            color: var(--secondary-text-color);
            text-decoration: none;
            border-bottom: 1px dashed var(--secondary-text-color);
            margin-left: 15px;
            display: inline-block;
            margin-top: 8px;
        }

        .popular-section h2 {
            font-size: 1.5rem;
            font-weight: 500;
            color: var(--primary-color);
            margin-top: 0;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--primary-color);
        }
        .popular-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
        }
        .popular-item {
            background-color: var(--popular-item-bg);
            height: 250px;
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            .container { padding: 10px; }
            .hero-section h1 { font-size: 2rem; }
            .hero-section .subtitle { font-size: 0.9375rem; }
            .popular-grid { grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); }
            .popular-item { height: 200px; }
            .search-tabs .tab { margin-left: 5px; padding: 6px 10px; font-size: 0.875rem; }
            .search-form input[type="text"], .search-form button { font-size: 0.9375rem; padding: 8px 10px;}
            .search-options a { margin-left: 5px; font-size: 0.8125rem;}
            /* .top-bar { flex-direction: column; gap: 10px; align-items: flex-start; }  Removed this to test new logic */
            .popular-section h2 { font-size: 1.25rem; }
        }

        /* Refined media query for top-bar wrapping behavior */
        @media (max-width: 420px) { /* Adjust this breakpoint as needed */
            .top-bar {
                 /* When items wrap, we want them to start from the left by default in their new line */
                justify-content: flex-start;
            }
            .theme-switcher {
                margin-left: auto; /* This pushes the theme switcher to the right on its line */
                 /* If you want it to take full width on its new line and then align its content right:
                 width: 100%;
                 display: flex;
                 justify-content: flex-end;
                 margin-left: 0; /* Reset margin-left if using width: 100% */
            }
            .popular-grid { grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); }
            .popular-item { height: 180px; }
            .hero-section h1 { font-size: 1.75rem; }
            .hero-section .subtitle { font-size: 0.875rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="top-bar">
            <button class="language-switcher" id="languageSwitcherBtn">
                <svg class="lang-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.6 5.8H5V4H11.8V5.8H9.2V14H7.6V5.8ZM13.4 11.3C13.4 10.1 13.74 9.09999 14.42 8.29999C15.1 7.49999 16 7.09999 17.1 7.09999C18.2 7.09999 19.08 7.49999 19.76 8.29999C20.44 9.09999 20.78 10.1 20.78 11.3C20.78 12.5 20.44 13.5 19.76 14.3C19.08 15.1 18.2 15.5 17.1 15.5C16 15.5 15.1 15.1 14.42 14.3C13.74 13.5 13.4 12.5 13.4 11.3ZM15.12 11.3C15.12 12.1 15.32 12.74 15.72 13.22C16.12 13.7 16.58 13.94 17.1 13.94C17.62 13.94 18.08 13.7 18.48 13.22C18.88 12.74 19.08 12.1 19.08 11.3C19.08 10.5 18.88 9.85999 18.48 9.37999C18.08 8.89999 17.62 8.65999 17.1 8.65999C16.58 8.65999 16.12 8.89999 15.72 9.37999C15.32 9.85999 15.12 10.5 15.12 11.3Z" fill="currentColor"/>
                    <rect x="3" y="17" width="18" height="1.5" fill="currentColor"/>
                    <path d="M19 20H5C4.44772 20 4 19.5523 4 19V3C4 2.44772 4.44772 2 5 2H19C19.5523 2 20 2.44772 20 3V19C20 19.5523 19.5523 20 19 20ZM5 3.5V18.5H19V3.5H5Z" fill="currentColor"/>
                </svg>
                <span class="current-lang-text" id="currentLangText">English</span>
                <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>

            <div class="theme-switcher">
                <button id="lightThemeBtn" class="active" aria-label="Light theme">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 3.5c-4.68 0-8.5 3.82-8.5 8.5s3.82 8.5 8.5 8.5 8.5-3.82 8.5-8.5S16.68 3.5 12 3.5zm0 15c-3.58 0-6.5-2.92-6.5-6.5s2.92-6.5 6.5-6.5 6.5 2.92 6.5 6.5-2.92 6.5-6.5 6.5zM12 6c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1s1 .45 1 1v2c0 .55-.45 1-1 1zm0 14c.55 0 1 .45 1 1v2c0 .55-.45 1-1 1s-1-.45-1-1v-2c0-.55.45-1 1-1zm-6.36-3.28c-.39-.39-1.02-.39-1.41 0l-1.41 1.41c-.39.39-.39 1.02 0 1.41.2.2.45.29.71.29s.51-.1.71-.29l1.41-1.41c.39-.39.39-1.02 0-1.41zm10.18 2.82c.2.2.45.29.71.29s.51-.1.71-.29l1.41-1.41c.39-.39.39-1.02 0-1.41s-1.02-.39-1.41 0l-1.41 1.41c-.39.39-.39 1.02 0 1.41zM21 11h-2c-.55 0-1 .45-1 1s.45 1 1 1h2c.55 0 1-.45 1-1s-.45-1-1-1zm-18 0H1c-.55 0-1 .45-1 1s.45 1 1 1h2c.55 0 1-.45 1-1s-.45-1-1-1zm7.78-6.36c.39-.39.39-1.02 0-1.41L9.36 1.82c-.39-.39-1.02-.39-1.41 0s-.39 1.02 0 1.41l1.41 1.41c.2.2.45.29.71.29s.51-.1.71-.29zm2.83 10.18l1.41 1.41c.2.2.45.29.71.29s.51-.1.71-.29l1.41-1.41c.39-.39.39-1.02 0-1.41s-1.02-.39-1.41 0l-1.41 1.41c-.39.39-.39 1.02 0 1.41z"/>
                    </svg>
                </button>
                <button id="darkThemeBtn" aria-label="Dark theme">
                    <svg viewBox="0 0 24 24">
                        <path d="M10 2c-1.82 0-3.53.5-5 1.35C7.99 5.08 10 8.3 10 12s-2.01 6.92-5 8.65C6.47 21.5 8.18 22 10 22c5.52 0 10-4.48 10-10S15.52 2 10 2z"/>
                    </svg>
                </button>
            </div>
        </header>

        <section class="hero-section">
            <div class="logo-title-container">
                <svg class="app-logo" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="24" height="24" fill="white" fill-opacity="0"/>
                    <rect x="5" y="7.24963" width="14.4993" height="4.79895" rx="2.39947" transform="rotate(-30 5 7.24963)" fill="#FF4900"/>
                    <rect x="5" y="13.572" width="14.4993" height="4.79895" rx="2.39947" transform="rotate(-30 5 13.572)" fill="#FFBC00"/>
                    <rect x="5" y="19.8439" width="14.4993" height="4.79895" rx="2.39947" transform="rotate(-30 5 19.8439)" fill="#F5EC00"/>
                </svg>
                <h1>Dek Store</h1>
            </div>
            <p class="subtitle" data-lang-key="subtitle">Learn in a Snap</p>
        </section>

        <section class="search-section">
            <div class="search-tabs">
                <span class="tab active" data-lang-key="general_search_tab">General Search</span>
            </div>
            <form class="search-form" action="#" method="get">
                <input type="text" name="q" id="searchInput" placeholder="Search for Deks" data-lang-key="search_placeholder_deks">
                <button type="submit" data-lang-key="search_button">Search</button>
            </form>
            <div class="search-options">
                <a href="#" data-lang-key="search_options_link">Search options</a>
            </div>
        </section>

        <section class="popular-section">
            <h2 data-lang-key="most_popular_title">Most Popular</h2>
            <div class="popular-grid">
                <div class="popular-item"></div>
                <div class="popular-item"></div>
                <div class="popular-item"></div>
                <div class="popular-item"></div>
                <div class="popular-item"></div>
            </div>
        </section>
    </div>

    <script>
        const lightThemeBtn = document.getElementById('lightThemeBtn');
        const darkThemeBtn = document.getElementById('darkThemeBtn');
        const languageSwitcherBtn = document.getElementById('languageSwitcherBtn');
        const currentLangTextEl = document.getElementById('currentLangText');
        const htmlEl = document.documentElement;

        const translations = {
            en: {
                current_lang_display: "English",
                subtitle: "Learn in a Snap",
                general_search_tab: "General Search",
                search_placeholder_deks: "Search for Deks",
                search_button: "Search",
                search_options_link: "Search options",
                most_popular_title: "Most Popular"
            },
            zh: {
                current_lang_display: "中文",
                subtitle: "轻松学习",
                general_search_tab: "常规搜索",
                search_placeholder_deks: "搜索Deks",
                search_button: "搜索",
                search_options_link: "搜索选项",
                most_popular_title: "最受欢迎"
            }
        };

        function applyTranslations(lang) {
            htmlEl.setAttribute('lang', lang);
            currentLangTextEl.textContent = translations[lang].current_lang_display;
            document.querySelectorAll('[data-lang-key]').forEach(el => {
                const key = el.getAttribute('data-lang-key');
                if (translations[lang][key]) {
                    if (el.tagName === 'INPUT' && el.type === 'text' && el.hasAttribute('placeholder')) {
                        el.placeholder = translations[lang][key];
                    } else {
                        el.textContent = translations[lang][key];
                    }
                }
            });
        }

        function setTheme(theme) {
            if (theme === 'dark') {
                htmlEl.classList.add('dark-mode');
                darkThemeBtn.classList.add('active');
                lightThemeBtn.classList.remove('active');
            } else {
                htmlEl.classList.remove('dark-mode');
                lightThemeBtn.classList.add('active');
                darkThemeBtn.classList.remove('active');
            }
            localStorage.setItem('theme', theme);
        }

        lightThemeBtn.addEventListener('click', () => setTheme('light'));
        darkThemeBtn.addEventListener('click', () => setTheme('dark'));

        function setLanguage(lang) {
            applyTranslations(lang);
            localStorage.setItem('language', lang);
        }

        languageSwitcherBtn.addEventListener('click', () => {
            const currentLang = htmlEl.getAttribute('lang') || 'en';
            const nextLang = currentLang === 'en' ? 'zh' : 'en';
            setLanguage(nextLang);
        });

        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme') || 'light';
            setTheme(savedTheme);

            const savedLanguage = localStorage.getItem('language') || 'en';
            setLanguage(savedLanguage);
        });
    </script>
</body>
</html>